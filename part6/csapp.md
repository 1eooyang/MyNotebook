## <center>深入理解计算机系统部分笔记
---
写的比较杂，也没什么逻辑性.
* chapter1：计算机系统漫游

![](./0.png)
![](1.png)
* chapter2：信息的表示和处理

![](./3.png)
* chapter5：优化程序性能
    * 妨碍优化的因素
        * 存储器别名使用
        * 函数副作用
    * 举例
```c++
//存储器别名使用
void twiddle1(int *xp ,int *yp){
    *xp+=*yp;
    *xp+=*yp;    
}
void twiddle2(int *xp,int *yp){
    *xp+=2* *yp;
}
//乍一看，两个函数功能一样，而且函数2比函数1有优化
//（twiddle2()只要求三次存储器引用：读*xp,读*yp,写*xp。
//而twiddle1()则执行了6次存储器引用）
```
但是考虑xp=yp时，函数1让*xp变成4倍,函数2则为3倍。
再举个例子
```c++
*q=x;
*p=y;
t=*q;//t=x or y，考虑p=q时
```
再来看看函数调用这个妨碍优化的因素
```c++
void func1(){
    return f()+f()+f()+f();
}
void func2(){
    return 4*f();
}
```
正常情况下以func2()作为func1()的优化是没问题的。但是考虑下面这个函数。
```
int counter=0;

int f(){
    return counter++;
}
```
该函数有副作用--会改变全局程序状态的一部分，改变调用它的次数会改变程序的行为。
解决方法是用内联函数替换优化函数调用。

* chapter6：存储器层次结构
    * 正金字塔结构：从上到下依次：寄存器，L1高速缓存(SRAM)，L2高速缓存(SRAM)，L3高速缓存(SRAM)，主存(DRAM)，本地二级存储（本地磁盘），远程二级存储（分布式文件系统，web服务器）。
    * 数据里通过主线在处理器和主存之间来回。总线事务分为读事物和写事务，读事务从主存传送数据到处理器，写事务从处理器传递数据到主存。总线是一组并行的导线能传递地址，数据，控制信号。
    * 磁盘构造：由大到小是：磁盘，盘片，表面，磁道，扇区，字节。
    * 对扇区的访问时间有三个主要部分:寻道时间，旋转时间，传送时间，

* chapter7：链接